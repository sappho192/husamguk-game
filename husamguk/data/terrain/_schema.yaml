# Terrain Data Schema
# 지형 타입 및 효과 정의
# Phase 5A: 전투 지형 시스템

_schema:
  version: "1.0.0"
  description: "지형 타입 및 효과 정의. 각 지형은 이동, 방어, 공격, ATB에 영향을 줌."

schema:
  terrain:
    id:
      type: string
      required: true
      description: "고유 식별자 (영문, snake_case)"
      example: "mountain"

    name_key:
      type: string
      required: true
      description: "로컬라이제이션 키"
      example: "TERRAIN_MOUNTAIN"

    description_key:
      type: string
      required: false
      description: "지형 설명 로컬라이제이션 키"
      example: "TERRAIN_MOUNTAIN_DESC"

    color:
      type: string
      required: true
      description: "타일 표시 색상 (hex 코드)"
      example: "#8B4513"

    char_code:
      type: string
      required: true
      description: "맵 그리드 문자열에서 사용할 한 글자 코드"
      example: "M"

    movement_cost:
      type: number
      required: true
      range: [0.5, 10.0]
      description: "이동 비용 배율 (1.0 = 기본, 높을수록 느림, 999 = 통과 불가)"
      default: 1.0

    defense_modifier:
      type: integer
      required: false
      range: [-50, 50]
      description: "방어력 수정치 (%). 양수는 방어 보너스."
      default: 0

    attack_modifier:
      type: integer
      required: false
      range: [-50, 50]
      description: "공격력 수정치 (%). 음수는 공격 페널티."
      default: 0

    atb_modifier:
      type: number
      required: false
      range: [-0.5, 0.5]
      description: "ATB 속도 수정치. 음수는 느려짐."
      default: 0.0

    passable:
      type: boolean
      required: true
      description: "이동 가능 여부"
      default: true

    special_effects:
      type: array
      required: false
      items:
        type: object
        properties:
          effect_id:
            type: string
            description: "효과 식별자"
          trigger:
            type: string
            enum: ["on_enter", "on_stay", "on_leave"]
            description: "효과 발동 시점"
          value:
            type: number
            description: "효과 수치"
      description: "특수 효과 목록 (예: 화염 데미지, 치유 등)"

example:
  terrains:
    - id: "plain"
      name_key: "TERRAIN_PLAIN"
      description_key: "TERRAIN_PLAIN_DESC"
      color: "#90EE90"
      char_code: "P"
      movement_cost: 1.0
      defense_modifier: 0
      attack_modifier: 0
      passable: true

    - id: "mountain"
      name_key: "TERRAIN_MOUNTAIN"
      description_key: "TERRAIN_MOUNTAIN_DESC"
      color: "#8B4513"
      char_code: "M"
      movement_cost: 2.5
      defense_modifier: 30
      attack_modifier: -10
      passable: true

    - id: "forest"
      name_key: "TERRAIN_FOREST"
      description_key: "TERRAIN_FOREST_DESC"
      color: "#228B22"
      char_code: "F"
      movement_cost: 1.5
      defense_modifier: 20
      attack_modifier: 0
      atb_modifier: -0.1
      passable: true

    - id: "river"
      name_key: "TERRAIN_RIVER"
      description_key: "TERRAIN_RIVER_DESC"
      color: "#4169E1"
      char_code: "R"
      movement_cost: 3.0
      defense_modifier: -20
      attack_modifier: -10
      passable: true
      special_effects:
        - effect_id: "movement_penalty"
          trigger: "on_stay"
          value: 0.5
